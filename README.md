# Subscription Manager

**Subscription Manager** - —ç—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–∞–µ–º—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞–º –∑–∞—Ä—É–±–µ–∂–Ω—ã—Ö –∫–∞—Ä—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –æ—Ç –¥—Ä—É–∑–µ–π –∏ —Å–µ–º—å–∏ –∑–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ Netflix, Spotify, YouTube Premium –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã.

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–∞–Ω –Ω–µ –º–æ–≥—É—Ç –æ—Ñ–æ—Ä–º–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Netflix, Spotify, YouTube Premium –∏ —Ç.–¥.) —Å–æ —Å–≤–æ–∏—Ö –∫–∞—Ä—Ç. –ü–æ—ç—Ç–æ–º—É –æ–Ω–∏ –º–æ–≥—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞—Ä—Ç–∞–º–∏ –¥—Ä—É–∑–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç—Å—è —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å. –û–¥–Ω–∞–∫–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∏–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º:
- –¢—Ä—É–¥–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫—Ç–æ –∏ —Å–∫–æ–ª—å–∫–æ –¥–æ–ª–∂–µ–Ω –∑–∞–ø–ª–∞—Ç–∏—Ç—å
- –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è—é—Ç—Å—è
- –ù–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö
- –°–ª–æ–∂–Ω–æ –≤–µ—Å—Ç–∏ —É—á–µ—Ç –ø–ª–∞—Ç–µ–∂–µ–π –∏ –ø—Ä–∏–±—ã–ª–∏

### –†–µ—à–µ–Ω–∏–µ
Subscription Manager –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏:

1. **REST API** - –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
2. **Telegram Bot** - –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª—é—Ç–∞–º–∏** - —Ä—É—á–Ω–æ–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç (–≤ –±—É–¥—É—â–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–∏–±—ã–ª–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º
5. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –≤–∏–¥–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram Bot  ‚îÇ    ‚îÇ    REST API     ‚îÇ    ‚îÇ   PostgreSQL    ‚îÇ
‚îÇ   (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å)   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (–ë–∏–∑–Ω–µ—Å-      ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (–•—Ä–∞–Ω–∏–ª–∏—â–µ)   ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ   –ª–æ–≥–∏–∫–∞)       ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Go 1.21+ —Å Fiber web framework
- **Database**: PostgreSQL 15+ —Å GORM ORM
- **Bot**: Telegram Bot API
- **Deployment**: Docker + Docker Compose
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Clean Architecture (Repository Pattern)

##  –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram ID
- –°–∏—Å—Ç–µ–º–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–¥–ø–∏—Å–∫–∞–º

### –ü–æ–¥–ø–∏—Å–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Netflix, Spotify, YouTube Premium, etc.)
- –ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã –≤ USD/EUR
- –ü–µ—Ä–∏–æ–¥—ã –æ–ø–ª–∞—Ç—ã
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### –ü–ª–∞—Ç–µ–∂–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—É–º–º –∫ –æ–ø–ª–∞—Ç–µ
- –£—á–µ—Ç –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–ª–∞—Ç–µ–∂–∞
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π

### –í–∞–ª—é—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ USD, EUR, RUB
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫—É—Ä—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑—É–º–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –û—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–∏–±—ã–ª–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
- –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- Git

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/yourusername/subscription-manager.git
cd subscription-manager
```
> **–í–Ω–∏–º–∞–Ω–∏–µ!**  
> –ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∞–º–æ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–µ—Ç–∫—É `devnull`:
> 
> ```bash
> git checkout devnull
> ```

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp .env.example .env
```

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞**
```env
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
PORT=8080
DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_secure_password
DB_NAME=submgr

# Telegram Bot
TOKEN=your_telegram_bot_token

# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (Telegram User IDs)
ADMIN_USER_IDS=123456789,987654321
```

4. **–ü–æ–ª—É—á–µ–Ω–∏–µ Telegram Bot Token**
- –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª

5. **–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ Telegram User ID**
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ [@userinfobot](https://t.me/userinfobot)
- –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à ID –≤ `ADMIN_USER_IDS`

6. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**
```bash
make st
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
make st

# –ó–∞–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make up

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make down

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
make ps

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö)
make rm

# –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
make build
```

##  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|----------------------|
| `PORT` | –ü–æ—Ä—Ç REST API | `8080` |
| `DB_HOST` | –•–æ—Å—Ç PostgreSQL | `db` |
| `DB_PORT` | –ü–æ—Ä—Ç PostgreSQL | `5432` |
| `DB_USER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | `postgres` |
| `DB_PASSWORD` | –ü–∞—Ä–æ–ª—å –ë–î | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `DB_NAME` | –ò–º—è –ë–î | `submgr` |
| `TOKEN` | Telegram Bot Token | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `ADMIN_USER_IDS` | ID –∞–¥–º–∏–Ω–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `subscriptions` - –ø–æ–¥–ø–∏—Å–∫–∏ (—Å–µ—Ä–≤–∏—Å—ã)
- `user_subscriptions` - —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- `payment_logs` - –∂—É—Ä–Ω–∞–ª –ø–ª–∞—Ç–µ–∂–µ–π
- `currency_rates` - –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
- `global_settings` - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã
- **USD** - –¥–æ–ª–ª–∞—Ä—ã –°–®–ê
- **EUR** - –µ–≤—Ä–æ
- **RUB** - —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ —Ä—É–±–ª–∏

#### –†–µ–∂–∏–º—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- **none** - –±–µ–∑ –Ω–∞–¥–±–∞–≤–∫–∏
- **percent** - –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –Ω–∞–¥–±–∞–≤–∫–∞
- **fixed** - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è

##  API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8080/api
```

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `POST /users` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /users/:id` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /users/tgid/:tgid` - –ø–æ–∏—Å–∫ –ø–æ Telegram ID
- `PUT /users/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /users/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ü–æ–¥–ø–∏—Å–∫–∏
- `POST /subscriptions` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `GET /subscriptions` - —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
- `GET /subscriptions/:id` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `PUT /subscriptions/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `DELETE /subscriptions/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

#### –†–∞—Å—á–µ—Ç—ã
- `GET /calculate/:userID/:subscriptionID` - —Ä–∞—Å—á–µ—Ç —Å—É–º–º—ã –∫ –æ–ø–ª–∞—Ç–µ

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- `POST /admin/:adminUserID/currency/set` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã
- `POST /admin/:adminUserID/currency/bulk` - –º–∞—Å—Å–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–æ–≤
- `GET /admin/:adminUserID/currency/status` - —Å—Ç–∞—Ç—É—Å –∫—É—Ä—Å–æ–≤
- `GET /admin/:adminUserID/profit/users` - –ø—Ä–∏–±—ã–ª—å –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- `GET /admin/:adminUserID/profit/subscriptions` - –ø—Ä–∏–±—ã–ª—å –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
- `GET /admin/:adminUserID/profit/total` - –æ–±—â–∞—è –ø—Ä–∏–±—ã–ª—å

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "tg_id": 123456789,
    "username": "john_doe",
    "fullname": "John Doe",
    "is_admin": false
  }'
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```bash
curl -X POST http://localhost:8080/api/subscriptions \
  -H "Content-Type: application/json" \
  -d '{
    "service_name": "Netflix",
    "base_price": 15.99,
    "base_currency": "USD",
    "period_days": 30
  }'
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã
```bash
curl -X POST http://localhost:8080/api/admin/YOUR_USER_ID/currency/set \
  -H "Content-Type: application/json" \
  -d '{
    "currency": "USD",
    "rate": 95.50
  }'
```

## ü§ñ Telegram Bot

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/menu` - –ø–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –ø–æ–º–æ—â—å

#### –ú–µ–Ω—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–ø–∏—Å–æ–∫
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–ø–∏—Å–æ–∫
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –æ—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Workflow –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**
   - –ê–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start` –±–æ—Ç—É
   - –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∞–¥–º–∏–Ω—Å–∫–∏–π –∞–∫–∫–∞—É–Ω—Ç

2. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏**
   - –ó–∞—Ö–æ–¥–∏–º –≤ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏"
   - –ù–∞–∂–∏–º–∞–µ–º "–°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
   - –í–≤–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω—É, –≤–∞–ª—é—Ç—É, –ø–µ—Ä–∏–æ–¥

3. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –ó–∞—Ö–æ–¥–∏–º –≤ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"
   - –ù–∞–∂–∏–º–∞–µ–º "–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
   - –í–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç**
   - –ó–∞—Ö–æ–¥–∏–º –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç

5. **–ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –ø–æ–¥–ø–∏—Å–∫–∞–º**
   - –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å–∫–∏

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

#### –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞

#### –ü–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
- –ü—Ä–∏–±—ã–ª—å —Å –∫–∞–∂–¥–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- –ú–µ—Å—è—á–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
- –ì–æ–¥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

### –ü—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞
```json
{
  "total_profit": 1250.75,
  "period": "2024-01",
  "users": [
    {
      "user_id": "uuid-123",
      "user_fullname": "John Doe",
      "total_profit": 125.50,
      "payment_count": 3
    }
  ],
  "subscriptions": [
    {
      "subscription_id": "uuid-456",
      "subscription_name": "Netflix",
      "total_profit": 856.25,
      "payment_count": 15
    }
  ]
}
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞
- Telegram ID –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å

### –î–∞–Ω–Ω—ã–µ
- –ü–∞—Ä–æ–ª–∏ –ë–î –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Telegram —Ç–æ–∫–µ–Ω—ã –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ
- Soft delete –¥–ª—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö


##  –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
subscription-manager/
‚îú‚îÄ‚îÄ cmd/                    # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ api/               # REST API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ bot/               # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ internal/              # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ app/              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ handlers/         # HTTP —Ö—ç–Ω–¥–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ repository/       # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ service/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ bot/              # –õ–æ–≥–∏–∫–∞ Telegram –±–æ—Ç–∞
‚îú‚îÄ‚îÄ pkg/                   # –ü—É–±–ª–∏—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ db/               # –ú–æ–¥–µ–ª–∏ –ë–î
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docker-compose.yml    # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ dockerfile           # –û–±—Ä–∞–∑ API
‚îú‚îÄ‚îÄ dockerfile.bot       # –û–±—Ä–∞–∑ –±–æ—Ç–∞
‚îî‚îÄ‚îÄ Makefile            # –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. **–ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –ë–î**
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `pkg/db/models.go`
   - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `AutoMigrate`

2. **–ù–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `internal/repository/*/interface.go`
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `internal/repository/*/gorm.go`
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `internal/app/app.go`

3. **–ù–æ–≤—ã–π —Ö—ç–Ω–¥–ª–µ—Ä**
   - –°–æ–∑–¥–∞—Ç—å –≤ `internal/handlers/`
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç—ã –≤ `internal/app/app.go`

4. **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±–æ—Ç–∞**
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `internal/bot/handlers.go`
   - –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ `internal/bot/keyboards/`

### –ó–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –¢–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
docker-compose up -d db

# API –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
go run cmd/api/main.go

# –ë–æ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
go run cmd/bot/main.go
```

##  –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f

# –¢–æ–ª—å–∫–æ API
docker-compose logs -f api

# –¢–æ–ª—å–∫–æ –±–æ—Ç
docker-compose logs -f bot

# –¢–æ–ª—å–∫–æ –ë–î
docker-compose logs -f db
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
# API
curl http://localhost:8080/api/healthz

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker-compose exec api ./app --health
```